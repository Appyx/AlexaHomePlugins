package com.example.devices.light

import at.rgstoettner.alexahome.plugin.v2.Lighting
import at.rgstoettner.alexahome.plugin.v2.OnOff
import at.rgstoettner.alexahome.plugin.v2.V2DeviceAdapter
import java.io.File

class ColorLightDevice : V2DeviceAdapter(), Lighting, OnOff {

    override fun turnOn() {
        command("9.162|4.521|0.570|0.572|0.567|0.576|0.564|0.578|0.564|0.578|0.567|0.575|0.565|0.577|0.567|0.576|0.571|0.575|0.558|1.717|0.569|1.660|0.564|1.691|0.558|1.697|0.553|0.594|0.553|1.697|0.559|1.703|0.555|1.692|0.558|1.697|0.551|1.683|0.572|0.592|0.552|0.591|0.551|0.593|0.546|0.595|0.548|0.598|0.545|0.597|0.546|0.599|0.545|0.595|0.540|1.716|0.543|1.715|0.534|1.717|0.544|1.710|0.524|1.738|0.531|1.725|0.538")
    }

    override fun turnOff() {
        command("9.156|4.509|0.594|0.549|0.592|0.553|0.585|0.557|0.588|0.555|0.583|0.560|0.586|0.557|0.586|0.558|0.592|0.552|0.584|1.674|0.589|1.662|0.579|1.652|0.627|1.653|0.571|0.574|0.578|1.676|0.576|1.678|0.582|1.673|0.583|0.560|0.582|1.672|0.586|0.558|0.585|0.562|0.585|0.553|0.626|0.490|0.668|0.495|0.590|0.560|0.578|1.677|0.581|0.562|0.582|1.676|0.579|1.673|0.587|1.668|0.580|1.674|0.581|1.673|0.660|1.567|0.607|41.296|9.158|2.239|0.674")
    }

    override fun getName(): String = "Beleuchtung"

    override fun setColor(color: Lighting.Color): Lighting.Color {

        if (color.hue == 0.0 && color.saturation == 1.0 && color.brightness == 1.0) { //red
            command("9.89|4.528|0.565|0.578|0.557|0.586|0.573|0.569|0.558|0.585|0.561|0.581|0.557|0.585|0.559|0.583|0.572|0.570|0.576|1.677|0.577|1.680|0.576|1.635|0.664|1.629|0.579|0.562|0.582|1.671|0.578|1.676|0.582|1.671|0.590|0.552|0.585|0.557|0.585|1.668|0.587|0.559|0.575|0.566|0.612|0.485|0.599|0.584|0.557|0.584|0.564|1.689|0.566|1.688|0.575|0.566|0.579|1.674|0.572|1.681|0.581|1.673|0.579|1.729|0.644|1.558|0.574")
        }
        if (color.hue == 120.0 && color.saturation == 1.0 && color.brightness == 1.0) { //green
            command("9.159|4.529|0.577|0.566|0.579|0.565|0.578|0.565|0.581|0.564|0.566|0.578|0.580|0.564|0.599|0.531|0.587|0.569|0.569|1.688|0.576|1.679|0.581|1.676|0.571|1.685|0.570|0.573|0.585|1.671|0.584|1.672|0.584|1.673|0.589|1.670|0.585|0.554|0.593|1.663|0.586|0.559|0.598|0.545|0.590|0.554|0.593|0.549|0.592|0.555|0.583|0.556|0.584|1.671|0.591|0.552|0.580|1.649|0.607|1.675|0.578|1.681|0.583|1.668|0.578|1.677|0.584|41.289|9.163|2.227|0.584")
        }
        if (color.hue == 240.0 && color.saturation == 1.0 && color.brightness == 1.0) { //blue
            command("9.153|4.500|0.576|0.574|0.586|0.564|0.571|0.558|0.609|0.532|0.587|0.556|0.585|0.553|0.588|0.557|0.587|0.554|0.555|1.704|0.589|1.662|0.576|1.678|0.610|1.642|0.579|0.563|0.568|1.689|0.594|1.657|0.582|1.671|0.588|1.665|0.592|0.550|0.588|0.552|0.589|0.555|0.588|1.665|0.600|0.540|0.618|0.524|0.597|0.545|0.580|0.563|0.587|1.666|0.585|1.669|0.586|1.667|0.583|0.559|0.592|1.662|0.588|1.669|0.578|1.648|0.613|41.294|9.100|2.257|0.615")
        }
        if (color.hue == 348.0 && color.saturation == 0.251 && color.brightness == 1.0) { //pink
            command("9.160|4.523|0.585|0.554|0.583|0.559|0.592|0.552|0.572|0.572|0.581|0.561|0.581|0.563|0.578|0.570|0.567|0.571|0.592|1.664|0.604|1.639|0.595|1.671|0.583|1.676|0.584|0.556|0.578|1.676|0.589|1.666|0.589|1.666|0.589|1.671|0.588|1.668|0.592|1.658|0.591|0.551|0.591|0.551|0.582|0.559|0.581|0.562|0.591|0.551|0.588|0.554|0.587|0.555|0.588|0.554|0.584|1.672|0.589|1.665|0.587|1.642|0.618|1.663|0.585|1.669|0.585|41.299|9.141|2.240|0.575")
        }
        if (color.hue == 174.0 && color.saturation == 0.7188 && color.brightness == 0.8784) { //t√ºrkis
            command("9.99|4.545|0.561|0.576|0.560|0.583|0.565|0.578|0.569|0.573|0.579|0.563|0.655|0.475|0.630|0.522|0.564|0.578|0.579|1.675|0.587|1.667|0.589|1.665|0.587|1.668|0.570|0.573|0.579|1.676|0.581|1.673|0.646|1.589|0.604|1.670|0.590|0.552|0.589|0.553|0.586|1.668|0.582|0.560|0.585|0.557|0.583|0.558|0.588|0.554|0.587|0.554|0.587|1.672|0.585|1.682|0.660|0.503|0.542|1.676|0.579|1.676|0.573|1.682|0.586|1.667|0.585|41.310|9.130|2.239|0.567")
        }
        if (color.hue == 120.0&& color.saturation == 0.4008 && color.brightness == 0.9294) { //light green
            command("9.128|4.520|0.571|0.571|0.579|0.563|0.575|0.567|0.581|0.561|0.581|0.560|0.592|0.550|0.591|0.551|0.585|0.558|0.580|1.698|0.587|1.645|0.570|1.684|0.580|1.674|0.586|0.557|0.581|1.673|0.578|1.678|0.579|1.675|0.583|0.560|0.581|0.564|0.605|0.511|0.613|0.553|0.569|1.685|0.573|0.569|0.564|0.577|0.577|0.565|0.579|1.679|0.579|1.671|0.579|1.675|0.590|1.664|0.590|0.524|0.609|1.678|0.582|1.667|0.588|1.668|0.586|41.303|9.119|2.253|0.572")
        }

        println("color: ")
        println("hue: ${color.hue}")
        println("sat: ${color.saturation}")
        println("br: ${color.brightness}")
        return color
    }

    private fun command(signal: String) {
        object : Thread() {
            override fun run() {
                File("/dev/gpio-reflect").writeText(signal)
            }
        }.start()
    }

    override fun setColorTemperature(value: Int): Int {
        if (value == 4000) {
            command("9.160|4.523|0.585|0.554|0.583|0.559|0.592|0.552|0.572|0.572|0.581|0.561|0.581|0.563|0.578|0.570|0.567|0.571|0.592|1.664|0.604|1.639|0.595|1.671|0.583|1.676|0.584|0.556|0.578|1.676|0.589|1.666|0.589|1.666|0.589|1.671|0.588|1.668|0.592|1.658|0.591|0.551|0.591|0.551|0.582|0.559|0.581|0.562|0.591|0.551|0.588|0.554|0.587|0.555|0.588|0.554|0.584|1.672|0.589|1.665|0.587|1.642|0.618|1.663|0.585|1.669|0.585|41.299|9.141|2.240|0.575")
        }
        if (value == 2200) {
            command("9.127|4.501|0.588|0.553|0.589|0.552|0.617|0.526|0.613|0.524|0.588|0.557|0.589|0.552|0.586|0.556|0.581|0.560|0.589|1.665|0.585|1.674|0.575|1.674|0.572|1.682|0.578|0.564|0.575|1.680|0.616|1.642|0.571|1.679|0.579|0.563|0.580|0.562|0.587|0.555|0.589|1.665|0.587|0.554|0.587|0.560|0.590|0.547|0.584|0.558|0.582|1.648|0.630|1.649|0.576|1.679|0.583|0.560|0.579|1.676|0.586|1.669|0.582|1.672|0.592|1.663|0.592|41.230|9.148|2.236|0.602")
        }
        return value
    }

    override fun decrementColorTemperature(): Int {
        return 5000
    }

    override fun incrementColorTemperature(): Int {
        return 5000
    }


}