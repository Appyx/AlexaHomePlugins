package at.rgstoettner.alexahome.myplugins.ir

import at.rgstoettner.alexahome.plugin.v2.V2Device
import at.rgstoettner.alexahome.plugin.v2.V2DeviceProvider


/**
 * These signals are recorded with the kernel module gpio-reflect: https://github.com/Appyx/gpio-reflect
 */
class TVChannelProvider : V2DeviceProvider {

    private val channels = mutableListOf<Pair<String, String>>()

    private val input = "9.62|4.452|0.588|0.531|0.579|0.540|0.580|1.658|0.576|0.543|0.583|0.536|0.578|0.540|0.578|0.541|0.582|0.537|0.578|1.659|0.584|1.654|0.576|0.543|0.575|1.663|0.578|1.659|0.580|1.658|0.581|1.657|0.579|1.658|0.575|1.663|0.579|1.659|0.578|0.541|0.582|1.656|0.574|0.544|0.576|0.543|0.575|0.544|0.578|0.541|0.577|0.542|0.573|0.546|0.577|1.664|0.574|0.540|0.583|1.654|0.577|1.662|0.574|1.663|0.578|1.663|0.570|40.93|9.44|2.210|0.577"
    private val pause = "|500.0|"
    private val ok = "9.56|4.453|0.579|0.540|0.578|0.540|0.581|1.658|0.589|0.529|0.579|0.540|0.584|0.541|0.578|0.535|0.580|0.539|0.581|1.657|0.582|1.656|0.590|0.529|0.581|1.657|0.586|1.652|0.586|1.652|0.588|1.650|0.583|1.655|0.587|0.532|0.583|0.537|0.582|1.656|0.582|0.537|0.589|0.531|0.582|0.536|0.577|1.660|0.579|0.540|0.584|1.654|0.584|1.654|0.579|0.540|0.580|1.658|0.583|1.655|0.583|1.654|0.584|0.535|0.582|1.660|0.578|40.92|9.37|2.215|0.580"
    private val exit = "9.78|4.456|0.584|0.536|0.580|0.538|0.575|1.663|0.577|0.541|0.581|0.538|0.580|0.539|0.584|0.535|0.576|0.543|0.582|1.660|0.577|1.658|0.579|0.540|0.578|1.660|0.577|1.660|0.581|1.658|0.579|1.657|0.582|1.656|0.577|1.661|0.578|1.663|0.573|0.542|0.583|1.655|0.581|1.657|0.581|0.538|0.582|1.655|0.583|0.540|0.575|0.538|0.579|0.540|0.577|1.660|0.577|0.542|0.581|0.537|0.581|1.656|0.581|0.542|0.579|1.654|0.580|40.82|9.37|2.217|0.581"
    //private val next = "9.57|4.459|0.584|0.536|0.580|0.538|0.584|1.654|0.584|0.539|0.571|0.544|0.580|0.538|0.582|0.537|0.582|0.538|0.579|1.659|0.585|1.653|0.582|0.541|0.580|1.654|0.578|1.659|0.581|1.658|0.583|1.654|0.589|1.649|0.581|0.538|0.586|0.533|0.581|0.538|0.587|0.532|0.581|0.538|0.583|0.536|0.578|0.541|0.586|0.533|0.579|1.659|0.586|1.652|0.580|1.657|0.584|1.654|0.590|1.647|0.577|1.660|0.581|1.658|0.583|1.653|0.584|40.80|9.31|2.227|0.577"
    private val one = "9.51|4.462|0.584|0.535|0.578|0.541|0.583|1.655|0.576|0.544|0.577|0.540|0.580|0.540|0.580|0.537|0.586|0.533|0.581|1.658|0.587|1.651|0.584|0.535|0.584|1.654|0.580|1.658|0.579|1.659|0.586|1.651|0.579|1.659|0.581|1.656|0.582|0.537|0.584|0.535|0.585|0.533|0.582|1.656|0.582|0.536|0.583|0.535|0.589|0.530|0.579|0.539|0.583|1.655|0.584|1.658|0.580|1.653|0.582|0.536|0.582|1.655|0.583|1.654|0.581|1.657|0.587"
    private val two = "9.59|4.462|0.573|0.543|0.567|0.552|0.573|1.665|0.575|0.544|0.571|0.547|0.573|0.546|0.573|0.546|0.572|0.551|0.565|1.669|0.570|1.668|0.571|0.548|0.573|1.665|0.573|1.665|0.560|1.678|0.564|1.674|0.566|1.672|0.564|0.556|0.563|1.679|0.560|0.554|0.557|0.563|0.558|1.680|0.559|0.560|0.562|0.557|0.557|0.562|0.564|1.673|0.560|0.558|0.559|1.678|0.561|1.677|0.557|0.562|0.557|1.680|0.568|1.670|0.561|1.677|0.564|40.119|8.988|2.251|0.554"
    private val seven = "9.78|4.460|0.583|0.536|0.578|0.540|0.575|1.663|0.582|0.537|0.581|0.538|0.584|0.534|0.584|0.536|0.584|0.534|0.589|1.648|0.587|1.651|0.585|0.535|0.582|1.656|0.580|1.658|0.588|1.649|0.583|1.657|0.583|1.654|0.581|1.656|0.584|1.655|0.583|1.655|0.582|0.537|0.584|1.653|0.582|0.538|0.584|0.535|0.584|0.533|0.586|0.541|0.569|0.543|0.578|0.540|0.584|1.654|0.580|0.539|0.582|1.655|0.583|1.659|0.579|1.654|0.584|40.85|9.31|2.219|0.588"
    private val eight = "9.53|4.461|0.577|0.542|0.580|0.539|0.582|1.656|0.577|0.541|0.584|0.535|0.581|0.537|0.582|0.536|0.584|0.535|0.587|1.650|0.582|1.655|0.581|0.537|0.586|1.656|0.582|1.650|0.583|1.655|0.585|1.652|0.589|1.647|0.592|0.527|0.584|0.535|0.579|0.539|0.587|1.651|0.586|1.651|0.581|0.539|0.581|0.535|0.586|0.532|0.583|1.654|0.582|1.655|0.583|1.654|0.583|0.536|0.583|0.535|0.589|1.649|0.588|1.648|0.584|1.652|0.584|40.74|9.28|2.224|0.577"

    init {
        channels.add(Pair("Live TV", input + pause + input + pause + ok + pause + exit))
        channels.add(Pair("Apple TV", input + pause + input + pause + input + pause + ok + pause + exit))
        channels.add(Pair("PS4", input + pause + input + pause + input + pause + input + pause + input + pause + ok + pause + exit))
        val postfix = pause + ok
        channels.add(Pair("Eins", one + postfix))
        channels.add(Pair("Zwei", two + postfix))
        channels.add(Pair("Sieben", seven + postfix))
        channels.add(Pair("Doku", one + pause + eight + postfix))
    }

    override fun getDevices(): MutableList<V2Device> {
        return channels.map { (name, signal) ->
            return@map IRSubDevice(name, signal)
        }.toMutableList()
    }
}